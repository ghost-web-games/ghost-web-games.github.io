{
  "title": "멀티플레이어 게임",
  "date": 1734478118782,
  "data": "{\n  \"time\": 1734505028856,\n  \"blocks\": [\n    {\n      \"id\": \"_hZjFpm9b2\",\n      \"type\": \"paragraph\",\n      \"data\": {\n        \"text\": \"이 문서에서는 멀티플레이어 게임에서 기본적으로 요구되는 네트워크 연결, 실시간 동기화, 충돌 처리 등의 기초를 다룹니다. 통신하는 방법은 여러가지가 있지만 서버사용을 최대한 피하기 위해 WebSocket 과 같은 통신방법은 제외하겠습니다.\"\n      },\n      \"tunes\": {\n        \"textVariant\": \"\"\n      }\n    },\n    {\n      \"id\": \"iYD5UY3uy-\",\n      \"type\": \"paragraph\",\n      \"data\": {\n        \"text\": \"WebRTC를 사용하여 네트워크를 구성하고, Three.js를 통해 멀티플레이어 환경을 구현하는 예제를 제공합니다.&nbsp;\"\n      },\n      \"tunes\": {\n        \"textVariant\": \"\"\n      }\n    },\n    {\n      \"id\": \"9AosUENWxi\",\n      \"type\": \"paragraph\",\n      \"data\": {\n        \"text\": \"WebRTC에서 P2P (Peer-to-Peer) 통신을 설정할 때, 초기 시그널링 과정에서는 서버가 필요합니다.서버는 Peer Connection을 맺기 위해 다음과 같은 정보를 교환하는 역할을 합니다:\"\n      },\n      \"tunes\": {\n        \"textVariant\": \"\"\n      }\n    },\n    {\n      \"id\": \"_Et4PO4ump\",\n      \"type\": \"list\",\n      \"data\": {\n        \"style\": \"ordered\",\n        \"meta\": {\n          \"counterType\": \"numeric\"\n        },\n        \"items\": [\n          {\n            \"content\": \"SDP (Session Description Protocol): offer와 answer를 교환하여 연결 설정.\",\n            \"meta\": {},\n            \"items\": []\n          },\n          {\n            \"content\": \"ICE (Interactive Connectivity Establishment) candidates: P2P 연결을 위한 네트워크 경로 탐색.\",\n            \"meta\": {},\n            \"items\": []\n          }\n        ]\n      }\n    },\n    {\n      \"id\": \"ukN0uo6mn4\",\n      \"type\": \"paragraph\",\n      \"data\": {\n        \"text\": \"하지만 WebRTC의 본질은 P2P 통신이므로, 일단 시그널링을 통해 연결이 설정되면 데이터는 서버를 거치지 않고 직접 통신하게 됩니다.\"\n      },\n      \"tunes\": {\n        \"textVariant\": \"\"\n      }\n    },\n    {\n      \"id\": \"CD74Iiuhgo\",\n      \"type\": \"header\",\n      \"data\": {\n        \"text\": \"서버 없이 통신하는 방법은 없을까?\",\n        \"level\": 3\n      }\n    },\n    {\n      \"id\": \"2wWrYIVYg5\",\n      \"type\": \"paragraph\",\n      \"data\": {\n        \"text\": \"서버의 도움 없이 완전한 P2P 통신을 설정하는 것은 사실상 불가능합니다. 이유는 다음과 같습니다:\"\n      },\n      \"tunes\": {\n        \"textVariant\": \"\"\n      }\n    },\n    {\n      \"id\": \"bOj4O_4mAw\",\n      \"type\": \"list\",\n      \"data\": {\n        \"style\": \"ordered\",\n        \"meta\": {\n          \"counterType\": \"numeric\"\n        },\n        \"items\": [\n          {\n            \"content\": \"시그널링 과정:\",\n            \"meta\": {},\n            \"items\": [\n              {\n                \"content\": \"두 클라이언트가 서로 연결되기 위해 offer/answer와 ICE candidates 정보를 교환해야 합니다. 이 정보 교환 없이는 연결 자체가 불가능합니다.\",\n                \"meta\": {},\n                \"items\": []\n              }\n            ]\n          },\n          {\n            \"content\": \"네트워크 주소 탐색 (NAT Traversal):\",\n            \"meta\": {},\n            \"items\": [\n              {\n                \"content\": \"대부분의 사용자 네트워크는 NAT (Network Address Translation) 뒤에 숨겨져 있기 때문에 외부에서 직접 접근할 수 없습니다.이를 해결하기 위해 STUN/TURN 서버를 사용해 네트워크 주소를 탐색하거나 우회해야 합니다.\",\n                \"meta\": {},\n                \"items\": []\n              }\n            ]\n          }\n        ]\n      }\n    },\n    {\n      \"id\": \"QXU69df-Kf\",\n      \"type\": \"header\",\n      \"data\": {\n        \"text\": \"서버 없이 P2P 통신에 접근하는 대안\",\n        \"level\": 3\n      }\n    },\n    {\n      \"id\": \"ZoxiE39ivy\",\n      \"type\": \"paragraph\",\n      \"data\": {\n        \"text\": \"1. 로컬 네트워크 (LAN) 내에서 직접 통신:만약 클라이언트들이 동일한 로컬 네트워크 (Wi-Fi 등)에 있다면, 서버 없이도 SDP 정보를 수동으로 교환하여 연결을 설정할 수 있습니다.\"\n      },\n      \"tunes\": {\n        \"textVariant\": \"\"\n      }\n    },\n    {\n      \"id\": \"YTnb4hORzJ\",\n      \"type\": \"paragraph\",\n      \"data\": {\n        \"text\": \"방법:\"\n      },\n      \"tunes\": {\n        \"textVariant\": \"\"\n      }\n    },\n    {\n      \"id\": \"fF5f3M5myR\",\n      \"type\": \"list\",\n      \"data\": {\n        \"style\": \"unordered\",\n        \"meta\": {},\n        \"items\": [\n          {\n            \"content\": \"수동으로 WebRTC의 SDP offer와 answer 정보를 교환합니다.\",\n            \"meta\": {},\n            \"items\": []\n          },\n          {\n            \"content\": \"브라우저 콘솔 등을 이용해 직접 데이터 입력을 수행합니다.\",\n            \"meta\": {},\n            \"items\": []\n          }\n        ]\n      }\n    },\n    {\n      \"id\": \"WZCa7gdtq8\",\n      \"type\": \"paragraph\",\n      \"data\": {\n        \"text\": \"수동으로 SDP offer와 answer 정보를 교환할 경우에도 네트워크에 따라 P2P 통신 가능 여부가 달라질 수 있습니다. 이는 주로 <b>NAT (Network Address Translation)</b>와 방화벽의 영향을 받기 때문입니다.\"\n      },\n      \"tunes\": {\n        \"textVariant\": \"\"\n      }\n    },\n    {\n      \"id\": \"R-opodJa0T\",\n      \"type\": \"header\",\n      \"data\": {\n        \"text\": \"가능한 경우\",\n        \"level\": 3\n      }\n    },\n    {\n      \"id\": \"qZlrX-md99\",\n      \"type\": \"list\",\n      \"data\": {\n        \"style\": \"ordered\",\n        \"meta\": {\n          \"counterType\": \"numeric\"\n        },\n        \"items\": [\n          {\n            \"content\": \"같은 로컬 네트워크 (LAN) 내에서 통신:\",\n            \"meta\": {},\n            \"items\": [\n              {\n                \"content\": \"동일한 Wi-Fi나 유선 네트워크에 있는 두 장치 간에는 보통 NAT의 영향을 받지 않으므로 P2P 통신이 원활히 이루어집니다.예를 들어, 회사 또는 가정의 네트워크 환경에서 클라이언트 간 직접 통신이 가능합니다.\",\n                \"meta\": {},\n                \"items\": []\n              }\n            ]\n          },\n          {\n            \"content\": \"퍼블릭 IP를 가진 경우:\",\n            \"meta\": {},\n            \"items\": [\n              {\n                \"content\": \"두 클라이언트가 모두 퍼블릭 IP를 가진 상태라면, SDP 정보를 수동으로 교환하면 NAT 없이 직접 통신이 가능합니다.\",\n                \"meta\": {},\n                \"items\": []\n              }\n            ]\n          }\n        ]\n      }\n    },\n    {\n      \"id\": \"CGEiQsighX\",\n      \"type\": \"header\",\n      \"data\": {\n        \"text\": \"불가능하거나 문제가 발생할 수 있는 경우\",\n        \"level\": 3\n      }\n    },\n    {\n      \"id\": \"TWSNhzGMWb\",\n      \"type\": \"list\",\n      \"data\": {\n        \"style\": \"ordered\",\n        \"meta\": {\n          \"counterType\": \"numeric\"\n        },\n        \"items\": [\n          {\n            \"content\": \"NAT 뒤에 있을 경우:\",\n            \"meta\": {},\n            \"items\": [\n              {\n                \"content\": \"대부분의 가정용 네트워크 및 회사 네트워크는 NAT 뒤에 있으며, 외부에서 직접 접근이 불가능합니다. NAT는 내부 네트워크의 IP를 외부에서 숨기기 때문에 클라이언트 간 P2P 연결이 어려워집니다.이 경우 STUN 서버를 사용하여 자신의 퍼블릭 IP와 포트를 탐색해야 합니다.\",\n                \"meta\": {},\n                \"items\": []\n              }\n            ]\n          },\n          {\n            \"content\": \"대칭형 NAT (Symmetric NAT):\",\n            \"meta\": {},\n            \"items\": [\n              {\n                \"content\": \"NAT 유형 중 대칭형 NAT에서는 특정 목적지마다 서로 다른 외부 포트를 할당하므로, P2P 연결이 거의 불가능합니다.이런 경우 TURN 서버가 필요합니다. TURN 서버는 P2P가 실패할 경우 데이터를 중계합니다.\",\n                \"meta\": {},\n                \"items\": []\n              }\n            ]\n          },\n          {\n            \"content\": \"방화벽:\",\n            \"meta\": {},\n            \"items\": [\n              {\n                \"content\": \"일부 네트워크(기업, 학교, 공공 Wi-Fi 등)는 방화벽으로 인해 UDP 또는 특정 포트의 트래픽을 차단합니다.이 경우 P2P 연결이 차단될 가능성이 높습니다.\",\n                \"meta\": {},\n                \"items\": []\n              }\n            ]\n          }\n        ]\n      }\n    },\n    {\n      \"id\": \"Am05qOGRAD\",\n      \"type\": \"header\",\n      \"data\": {\n        \"text\": \"수동 교환을 통해 통신을 원활히 설정하려면\",\n        \"level\": 3\n      }\n    },\n    {\n      \"id\": \"iV4R7cW4CJ\",\n      \"type\": \"list\",\n      \"data\": {\n        \"style\": \"ordered\",\n        \"meta\": {\n          \"counterType\": \"numeric\"\n        },\n        \"items\": [\n          {\n            \"content\": \"STUN 서버 사용 권장:\",\n            \"meta\": {},\n            \"items\": [\n              {\n                \"content\": \"STUN 서버는 퍼블릭 IP와 포트를 확인하는 데 도움을 줍니다. WebRTC는 무료 STUN 서버를 기본적으로 제공합니다.\",\n                \"meta\": {},\n                \"items\": []\n              },\n              {\n                \"content\": \"예:<b> stun:stun.l.google.com:19302</b>\",\n                \"meta\": {},\n                \"items\": []\n              }\n            ]\n          },\n          {\n            \"content\": \"TURN 서버 고려:\",\n            \"meta\": {},\n            \"items\": [\n              {\n                \"content\": \"P2P가 실패할 경우, TURN 서버는 데이터를 중계하여 연결을 보장합니다.TURN 서버는 설치 및 유지 관리가 필요하므로 비용이 발생할 수 있습니다.\",\n                \"meta\": {},\n                \"items\": []\n              }\n            ]\n          },\n          {\n            \"content\": \"포트 전달 (Port Forwarding):\",\n            \"meta\": {},\n            \"items\": [\n              {\n                \"content\": \"NAT 환경에서 P2P 연결을 안정적으로 하기 위해 라우터 설정에서 포트를 열어줄 수 있습니다.\",\n                \"meta\": {},\n                \"items\": []\n              }\n            ]\n          }\n        ]\n      }\n    },\n    {\n      \"id\": \"sin6hOFTXq\",\n      \"type\": \"header\",\n      \"data\": {\n        \"text\": \"예제\",\n        \"level\": 4\n      }\n    },\n    {\n      \"id\": \"DXFZaHBit4\",\n      \"type\": \"embed\",\n      \"data\": {\n        \"service\": \"codepen\",\n        \"source\": \"https://codepen.io/ghostwebservice/pen/jENyaQe\",\n        \"embed\": \"https://codepen.io/ghostwebservice/embed/jENyaQe?height=300&theme-id=0&default-tab=css,result&embed-version=2\",\n        \"width\": 600,\n        \"height\": 300,\n        \"caption\": \"peer A입니다.\"\n      }\n    },\n    {\n      \"id\": \"ifB2JWk4Ts\",\n      \"type\": \"embed\",\n      \"data\": {\n        \"service\": \"codepen\",\n        \"source\": \"https://codepen.io/ghostwebservice/pen/jENyaQe\",\n        \"embed\": \"https://codepen.io/ghostwebservice/embed/jENyaQe?height=300&theme-id=0&default-tab=css,result&embed-version=2\",\n        \"width\": 600,\n        \"height\": 300,\n        \"caption\": \"peer B입니다. A와 B는 동일한 코드입니다\"\n      }\n    },\n    {\n      \"id\": \"Kfi13JQS6O\",\n      \"type\": \"header\",\n      \"data\": {\n        \"text\": \"사용방법\",\n        \"level\": 5\n      }\n    },\n    {\n      \"id\": \"kaHphQRpkn\",\n      \"type\": \"list\",\n      \"data\": {\n        \"style\": \"ordered\",\n        \"meta\": {\n          \"counterType\": \"numeric\"\n        },\n        \"items\": [\n          {\n            \"content\": \"첫 번째 클라이언트에서 \\\"Create Offer\\\"를 클릭하고, Local SDP를 복사합니다.\",\n            \"meta\": {},\n            \"items\": []\n          },\n          {\n            \"content\": \"두 번째 클라이언트의 \\\"Remote SDP\\\"에 붙여넣고 \\\"Set Remote Description\\\"을 클릭한 뒤 \\\"Create Answer\\\"를 누릅니다.\",\n            \"meta\": {},\n            \"items\": []\n          },\n          {\n            \"content\": \"두 번째 클라이언트에서 생성된 Local SDP를 첫 번째 클라이언트의 \\\"Remote SDP\\\"에 붙여넣고 \\\"Set Remote Description\\\"을 클릭합니다.\",\n            \"meta\": {},\n            \"items\": []\n          },\n          {\n            \"content\": \"이제 두 클라이언트 간 텍스트 메시지를 주고받을 수 있습니다.\",\n            \"meta\": {},\n            \"items\": []\n          }\n        ]\n      }\n    }\n  ],\n  \"version\": \"2.30.7\"\n}",
  "id": "1734478118567_33"
}